# Exercise 10: Setup HCX on AVS 

## Lab objectives

In this exercise, you will complete the following tasks:

+ Task 1: Deploy HCX OVA

## Task 1: Deploy HCX OVA

In this step, we will deploy the HCX VM with the configuration from the JumpBox-VM VMware Lab Environment section.

## Deploy HCX from Content Library

1. Once the import is completed from the previous task, click on **Menu**, and select **Inventory**. 

    ![](../Images/Mod2Task4Pic1.png)
   
2. Under **SDDC-Datacenter**, if you see a **HCX-Connector** VM is already there, then click on **HCX-Connector** (3), then stop the VM by clicking on **Stop icon** (4). Once the VM is stopped, click on **Actions** (5). Under actions select **Delete from Disk** to delete the VM. Once deleted proceed to the next step. On **Confirm delete** popup click on **YES**

    ![](../Images/stophcxvm.png) 

    ![](../Images/Delete-HCX-ConnectorVM.png) 

3. Right click on **SDDC-Datacenter** and select **New Virtual Machine**.

    ![](../Images/Mod2Task4Pic2.png)
   
4. Select **Deploy from template** for **Select a creation type** and click on **NEXT**.

    ![](../Images/Mod2Task4Pic3.png)
    
5. Next on **Select a template** select **VMware-HCX-Connector** and click on **NEXT**.    

    ![](../Images/Mod2Task4Pic4.1.png)
    
6. Enter **HCX-Connector** as the **Virtual machine name** in **Select a name and folder** and click **NEXT**.  

    ![](../Images/Mod2Task4Pic5.png) 
     
7. On the **Select a compute resource** select **Cluster-1** and click on **NEXT**.

    ![](../Images/Mod2Task4Pic6.png)
     
8. Click **Next** on **Review details**, in **License Agreement** accept the agreement and click **NEXT**.

   ![](../Images/10.7.png)

9. Next for **Select storage** select the available storage and click **NEXT**.

    ![](../Images/Mod2Task4Pic8.png)
  
10. For **Select networks** set the **Destination Network** as **Web-Segment** and click **NEXT**.
  
    ![](../Images/Mod2Task4Pic9.png)

    >**Important :** Ensure that you modify details only for the properties specified in the next few steps in the tables, leaving other properties as default/blank. Refer to the accompanying images for guidance.

11.  Next on **Customize template** provide and following details and scroll down to **Network Properties** in same page.
    

       |Property| Value| 
       |---|---|
       |CLI “admin” User Password| MSFTavs1!|
       |CLI “admin” Confirm Password| MSFTavs1!|
       |CLI “admin” root Password/| MSFTavs1!|
       |CLI “admin” Confirm Password/| MSFTavs1!|
 
     ![](../Images/Mod2Task4Pic10.1.png)

       |Property| Value| 
       |---|---|
       |Hostname| hcx-connector|
       |Network 1 IPv4 Address| 10.10.4.100|
       |Network 1 IPv4 Prefix Length| 24|
       |Default IPv4 Gateway| 10.10.4.1|
     
       ![](../Images/Mod2Task4Pic10.2.png)

       |Property| Value| 
       |---|---|
       |DNS Server list| 1.1.1.1|

      ![](../Images/Mod2Task4Pic10.3.png)

       |Property| Value| 
       |---|---|
       |Enable SSH| Enabled|
    
      ![](../Images/Mod2Task4Pic10.4.png)
   
12. On **10 Ready to complete** click on **FINISH** to complete the setup of new virtual machine.

     ![](../Images/Mod2Task4Pic11.png)
   
14. Once done, navigate to newly created **HCX-Connector VM** and **Power on**. The boot process may take 10-15 minutes to complete.   

     ![](../Images/Mod2Task4Pic12.png)
     
#### Review:

In this exercise you completed:

- Deployed OVA from downloads, configured and deployed **VMware-HCX-Connector** VM. 
- Deployed HCX from Content Library, configured and deployed **HCX-Connector VM** VM. 

#### References:

[Configure JumpBox-VM VMware HCX Connector](https://learn.microsoft.com/en-us/azure/azure-vmware/configure-vmware-hcx)
